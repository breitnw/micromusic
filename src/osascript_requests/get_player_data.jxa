//JXA script to receive data from Apple Music

var app = Application('Music');
var track = app.currentTrack;
var artwork = track.artworks[0];

return {
    track_name: track.name(),
    track_artist: track.artist(),
    track_album: track.album(),
    track_loved: track.loved(),
    track_length: track.finish(),
    track_artwork_data: artwork.rawData(),

    player_pos: app.playerPosition(),
    player_state: app.playerState(),
}